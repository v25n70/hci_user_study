<html>
<head>

	<title>Ticket Management System</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<style>
	.footer {
		position: fixed;
		left: 0px;
		bottom: 0px;
		width: 100%;
		padding-top: 10px;
		padding-bottom: 40px;
	}
	.container {
		width: 80%;
		margin: auto;
	}
	button span {
		padding-right: 10px;
	}
</style>

</head>
<body>

	<div class="container">
		<br>
		<div class="w3-row">
			<div class="w3-col s8">
				<h1>Ticket View</h1>
			</div>
			<div class="w3-col s4">
				<br>
				Welcome, John! ðŸ‘‹
			</div>
		</div>

		<table class="w3-table">
			<tr>
				<td>Subject</td>
				<td>$subject$</td>
			</tr>
			<tr>
				<td>Person</td>
				<td>$name$</td>
			</tr>
			<tr>
				<td>Email</td>
				<td>$email$</td>
			</tr>
			<tr>
				<td>State</td>
				<td>$state$</td>
			</tr>
		</table>

		<br>

		<h2>Messages  </h2>
		<table class="w3-table w3-striped">
			<tr>
				<th>Date</th>
				<th>Title</th>
				<th>Details</th>
			</tr>
			$message_code$
		</table>
		<br><br>
		<button class="w3-button w3-blue" onclick="add_message()"><span>Ctrl 2</span> Add Message</button>

		<br><br>

		<h2>Emails </h2>
		<table class="w3-table w3-striped">
			<tr>
				<th>Date</th>
				<th>Subject</th>
				<th>Details</th>
			</tr>
			$email_code$
		</table>

	</div>

	<div class="footer">
		<div class="container">
			<div class="w3-row">
				<div class="w3-col s3">
					<button class="w3-button w3-blue" onclick="mark_closed()">
						<span>Ctrl 1</span>
						Mark Closed
					</button>
				</div>
				<div class="w3-col s3">
					<br>
				</div>
				<div class="w3-col s3">
					<br>
				</div>
				<div class="w3-col s3">
					<button class="w3-button w3-green" onclick="home()">
						<span>ESC</span>
						Home
					</button>
				</div>
			</div>
		</div>
	</div>

<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
<script>

function goto_url(url) {
	const minDelay = 30;
	const maxDelay = 90;
	const randomDelay = Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;
	setTimeout(() => {
		window.location = url;
	}, randomDelay);
}

function mark_closed() {
	goto_url("/ticket/close?id=$ticket_id_for_mark_close$");
}

function add_message() {
	goto_url("/ticket/message/add?id=$ticket_id$");
}

function home() {
	goto_url("/");
}

hotkeys('ctrl+1,ctrl+2,escape', function(event, handler) {
	switch (handler.key) {
		case 'ctrl+1':
		{
			mark_closed();
			break;
		}
		case 'ctrl+2':
		{
			add_message();
			break;
		}
		case 'escape': {
			home();
			break;
		}
	}
});

</script>

</body>
</html>